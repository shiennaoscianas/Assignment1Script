#!/bin/bash


#Variables for System Information
#DATE/TIME, HOSTNAME, DISTROWITHVERSION, UPTIME
DateTime=$(date +"%Y-%m-%d %H:%M:%S")
Hostname=$(hostname)
Username=$USER
OS=$(awk -F= '/^PRETTY_NAME/{print $2}' /etc/os-release)
Uptime=$(uptime -p)


#Variables for Hardware Information
#PROCESSOR MAKE AND MODEL, CURRENT AND MAXIMUM CPU SPEED, SIZE OF INSTALLED RAM, MAKE AND MODEL AND SIZE FOR ALL INSTALLED DISKS, MAKE AND MODEL OF VIDEO CARD
Cpu=$(lscpu | grep "Model name" | awk -F ':' '{print $2}' | xargs)
Speed=$(lscpu | grep "BogoMIPS" | uniq -u) 
#BogoMips is a crude measurement of CPU speed made by the Linux kernel
Ram=$(free -h | awk '/^Mem:/{print $2}')
Disk=$(df -h | awk '!/Filesystem/ {print $6 " " $4}')
Video=$(sudo lshw -class display | awk '/product/ {print $2 " " $3 " " $4}')


#Variables for Network Information
#FQDN, IP ADDRESS FOR THE HOSTNAME, GATEWAY ADDRESS, IP OF DNS SERVER, MAKE AND MODEL OF NETWORK CARD, IP Address in CIDR format
FQDN=$(hostname -f)
HostAddress=$(hostname -I | awk '{print $1}')
GatewayIP=$(ip route | grep default | awk '{print $3}')
DNSServer=$(grep "nameserver" /etc/resolv.conf | awk '{print $2}')
InterfaceName=$(lshw -class network | awk '/product/ {print $2 " " $3 " " $4}')
myIPAddress=$(ip a | grep -w inet | awk '{print $2}' | grep -v 127.0.0.1)


#Variables for System Status
#USER, FREE SPACE FOR LOCAL FILESYSTEMS IN FORMAT: /MOUNTPOINT N, PROCESS COUNT N, LOAD AVERAGES N, DATA FROM FREE, LISTENING NETWORK PORTS N, DATA FROM UFW SHOW
UsersLoggedIn=$(who | awk '{print $1}' | sort | uniq | tr '\n' ',')
DiskSpace=$(df -h | awk '!/Filesystem/ {print $6 " " $4}')
ProcessCount=$(ps aux | wc -l)
LoadAverages=$(cat /proc/loadavg | awk '{print $1 ", " $2 ", " $3}')
MemoryAllocation=$(free -h | grep Mem | awk '{print $4 "/" "(free)"}')
ListeningNetworkPorts=$(ss -tuln | awk '/LISTEN/ {print $4}' | cut -d':' -f2 | sort -u | tr '\n' ',')
UFWRules=$(sudo ufw status verbose)


#--------------------END OF VARIABLES--------------------


cat <<EOF

System Report generated by $Username, $DateTime


System Information
--------------------
Hostname: $Hostname
OS: $OS
Uptime: $Uptime


Hardware Information
--------------------
cpu: $Cpu
Speed: $Speed
Ram: $Ram
Disk(s): $Disk
Video: $Video


Network Information
--------------------
FQDN: $FQDN
Host Address: $HostAddress
Gateway IP: $GatewayIP
DNS Server: $DNSServer
 
Interface Name: $InterfaceName
IP Address: $IPAddress


System Status
--------------------
Users Logged In: $UsersLoggedIn
Disk Space: $DiskSpace 
Process Count: $ProcessCount
Load Averages: $LoadAverages
Memory Allocation: $MemoryAllocation
Listening Network Ports: $ListeningNetworkPorts
UFW Rules: $UFWRules


EOF
