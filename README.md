#!/bin/bash

#My Variables for System Information
DateTime=$(date +"%Y-%m-%d %H:%M:%S")
myHostname=$(hostname)
myUsername=$USER
myOS=$(awk -F= '/^PRETTY_NAME/{print $2}' /etc/os-release)
myUptime=$(uptime -p)

#My Variables for Hardware Information
myCpu=$(lscpu | grep "Model name" | awk -F ':' '{print $2}' | xargs)
mySpeed=$(lscpu | grep "BogoMIPS" | uniq -u) 
#BogoMips is a crude measurement of CPU speed made by the Linux kernel
myRam=$(free -h | awk '/^Mem:/{print $2}')
myDisk=$(df -h | awk '!/Filesystem/ {print $6 " " $4}')
myVideo=$(sudo lshw -class display | awk '/product/ {print $2 " " $3 " " $4}')

#My Variables for Network Information
myFQDN=$(hostname -f)
myHostAddress=$(hostname -I | awk '{print $1}')
myGatewayIP=$(ip route | grep default | awk '{print $3}')
myDNSServer=$(grep "nameserver" /etc/resolv.conf | awk '{print $2}')
myInterfaceName=$(lshw -class network | awk '/product/ {print $2 " " $3 " " $4}')
myIPAddress=$(ip a | grep -w inet | awk '{print $2}' | grep -v 127.0.0.1)

#My Variables for System Status
myUsersLoggedIn=$(who | awk '{print $1}' | sort | uniq | tr '\n' ',')
myDiskSpace=$(df -h | awk '!/Filesystem/ {print $6 " " $4}')
myProcessCount=$(ps aux | wc -l)
myLoadAverages=$(cat /proc/loadavg | awk '{print $1 ", " $2 ", " $3}')
myMemoryAllocation=$(free -h | grep Mem | awk '{print $4 "/" "(free)"}')
myListeningNetworkPorts=$(ss -tuln | awk '/LISTEN/ {print $4}' | cut -d':' -f2 | sort -u | tr '\n' ',')
myUFWRules=$(sudo ufw status verbose)

#--------------------END OF VARIABLES--------------------

cat <<EOF

System Report generated by $myUsername, $DateTime


System Information
--------------------
Hostname: $myHostname
OS: $myOS
Uptime: $myUptime


Hardware Information
--------------------
cpu: $myCpu
Speed: $mySpeed
Ram: $myRam
Disk(s): $myDisk
Video: $myVideo


Network Information
--------------------
FQDN: $myFQDN
Host Address: $myHostAddress
Gateway IP: $myGatewayIP
DNS Server: $myDNSServer
 
Interface Name: $myInterfaceName
IP Address: $myIPAddress


System Status
--------------------
Users Logged In: $myUsersLoggedIn
Disk Space: $myDiskSpace 
Process Count: $myProcessCount
Load Averages: $myLoadAverages
Memory Allocation: $myMemoryAllocation
Listening Network Ports: $myListeningNetworkPorts
UFW Rules: $myUFWRules


EOF
